# GeminiとBERTの役割分担フローチャート

## 論争解析モジュール処理フロー

```
入力: 対話ログ（双方の発言）
     ↓
┌─────────────────────────────────────────────────────────────┐
│                    前処理                                    │
│  - 発言データの正規化                                        │
│  - 入力検証                                                  │
└─────────────────────────────────────────────────────────────┘
     ↓
┌─────────────────────────────────────────────────────────────┐
│                  BERT分類処理                                │
│  - 各発言を「主張/根拠/反論/補足」等に分類                    │
│  - 信頼度スコア付与                                          │
│  - サブカテゴリ決定                                          │
└─────────────────────────────────────────────────────────────┘
     ↓
┌─────────────────────────────────────────────────────────────┐
│                Gemini API処理（並列実行）                     │
│                                                             │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐ │
│  │   論点分析       │  │   立場分析       │  │   関係分析       │ │
│  │                 │  │                 │  │                 │ │
│  │ - 主要論点抽出   │  │ - A/Bの立場特定  │  │ - 対立強度計算   │ │
│  │ - キーワード抽出 │  │ - 根拠発言特定   │  │ - 関係タイプ分類 │ │
│  │ - 信頼度評価     │  │ - 信頼度評価     │  │ - 信頼度評価     │ │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘ │
└─────────────────────────────────────────────────────────────┘
     ↓
┌─────────────────────────────────────────────────────────────┐
│                    結果統合                                  │
│  - BERT分類結果とGemini分析結果をマージ                      │
│  - 論点構造の構築                                            │
│  - 対立関係図データの生成                                    │
│  - サマリー情報の計算                                        │
└─────────────────────────────────────────────────────────────┘
     ↓
出力: 論争解析結果（JSON形式）
```

## GeminiとBERTの役割分担

### Gemini APIの役割
- **論点抽出**: 対話から主要な論点を自然言語理解で抽出
- **立場分析**: 各発言者の論点に対する立場を分析
- **関係分析**: 論点間の対立・合意関係を分析
- **文脈理解**: 発言の意味的関係を理解

### BERTの役割
- **発言分類**: 各発言を「主張/根拠/反論/補足」等に分類
- **信頼度評価**: 分類結果の信頼度を数値化
- **サブカテゴリ**: より詳細な分類（積極的主張/消極的主張等）
- **構造化**: 発言の構造的特徴を抽出

### 統合処理
- **結果マージ**: Geminiの高次分析とBERTの構造分析を統合
- **品質保証**: 両方の結果を照合して信頼性を向上
- **構造化出力**: 可視化に適したJSON形式で出力
